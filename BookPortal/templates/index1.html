{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <style>
.dropbtn {
  background-color: black;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
  color: blue;
}

#myInput {
  box-sizing: border-box;
  background-image: url('searchicon.png');
  background-position: 14px 12px;
  background-repeat: no-repeat;
  font-size: 16px;
  padding: 14px 20px 12px 45px;
  border: none;
  border-bottom: 1px solid #ddd;
}

#myInput:focus {outline: 3px solid #ddd;}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f6f6f6;
  min-width: 230px;
  overflow: auto;
  border: 1px solid #ddd;
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown a:hover {background-color: black;}

.show {display: block;}
</style>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>SecondHand HomePage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat+Alternates">
    <link rel="stylesheet" href="assets/css/Navigation-Clean.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat+Alternates">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/fontawesome.min.css">
    <link rel="stylesheet" href="assets/css/Navigation-Clean.css">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="https://kit.fontawesome.com/5a485982fd.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>

<body>
    <nav class="navbar navbar-light navbar-expand-md navigation-clean" style="background: rgb(34,34,34);">
        <div class="container"><a class="navbar-brand" href="#"
                style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">SecondHand
                Books</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"
                style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;"><span
                    class="sr-only"
                    style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">Toggle
                    navigation</span><span class="navbar-toggler-icon"
                    style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1"
                style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">
                <ul class="navbar-nav ml-auto"
                    style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">
                    <li class="nav-item"
                        style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">
                        <a class="nav-link active" href="/"
                            style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;"><i
                                class="fas fa-home"></i> Home</a></li>
                    <li class="nav-item"
                        style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">
                        <a class="nav-link" href="viewCart"
                            style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;"><i
                                class="fas fa-shopping-cart"></i> My Cart</a></li>
                    {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link active"
                            style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;"
                            href=sellBooks><i class="fas fa-book"></i> Sell Books</a></li>

                    <div class="dropdown">
                        <p class="user-login" style="margin: 10px;"><i class="fas fa-user"></i> {{user.name}}</a>
                        <div class="dropdown-content">
                            <a href="/myBooks">My Books</a>
                            <a href="/myOrders">My Orders</a>
                            <a href="logout">Log Out</a>
                        </div>
                    </div>
                    {% else %}
                    <li class="nav-item"
                        style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">
                        <a class="nav-link" href="/login"
                            style="color: #ffffff;font-family: Montserrat, sans-serif;font-weight: bold;font-style: normal;font-size: 18px;">Login
                            or Register</a></li>

                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    
<div class="container">
        <div class="row">
            <div class="col-md-12" style="padding: 42px;">
                <h1 class="display-3 text-uppercase"
                    style="padding-right: 10px;padding-bottom: 10px;text-align: center;">all books</h1>
            </div>
        </div>
</div>
<div class="row" style="text-align: center;">
  <div class="col-6">
    <div class="dropdown" >
      <button onclick="myFunction()" class="dropbtn">Filter by genre </button>
      <div id="myDropdown" class="dropdown-content">
        <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
        <a href="/filtercat/comic">Comics</a>
        <a href="/filtercat/novel">Novels</a>
        <a href="/filtercat/ncert">NCERT</a>
        <a href='/'>All</a>
      </div>
    </div>
  </div>
  <div class="col-6">
    <div class="dropdown" >
      <button onclick="myFunction()" class="dropbtn">Filter by type </button>
      <div id="myDropdown" class="dropdown-content">
        <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
        <a href="/filtertype/new">New</a>
        <a href="/filtertype/old">Old</a>
        <a href="/">All</a>
      </div>
  </div>
  </div>
<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
</script>
<div class="container" style="padding: 43px;">
  <div class="row">
    {% for book in books %}
    {% if book.status != 'sold' and book.user != user.email%}
    <div class="col-md-3">
      <div class="shadow-lg bg-white p-4 mb-4 rounded">
      <div class="box" >
        <a href="viewBook?id={{book.id}}" class="nav-item" style="color: black ;text-decoration: none;">
            {% if book.new == True %}
            <img src="{% static 'images/ZUiY.gif' %}" height="30px" width="30px">New
            {% else %}
            <div class="con" style="height: 30px;"></div>
            {% endif %}
            <img class="card-img-bottom" src="{{book.image.url}}" style="height: 300px; width: 230px;">
            <p style="font-family: Montserrat, sans-serif;font-size: 18px;padding-top: 20px;margin-bottom: 0px;">{{book.BookName}}</p>
            <p style="font-family: Montserrat, sans-serif;">{{book.price}}</p>
            {% if book.id in cart %}
            <a href="removecart/{{book.id}}"><button class="btn btn-danger" type="button" style="margin-bottom: 12px;">Remove from Cart</button></a>
            {% else %}
            <a href="addtoCart/{{book.id}}"><button class="btn btn-primary" type="button" style="margin-bottom: 12px;">Add to Cart</button></a>
            {% endif %}
    </div>
    
    </div>
  </div>
    {% endif %}
    {% endfor %}
  </div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
</body>

</html>
